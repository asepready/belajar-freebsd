# DNS Server FreeBSD
<p align="center">
<img src="./../assets/images/logo.png" alt="Logo" style="width:200px;"/>
</p>

## Persiapan
| Komponen | Deskripsi |
| - | - |
| Hostname | lab-fbsd |
| Interface | em0 |
| Host IP address | 172.16.16.99/24 |
| IP address range | 172.16.16.100 â€“ 172.16.16.254 |
| Internet gateway | 172.16.16.1 |
| Domain Local | lab-fbsd.edu |
| DNS server/s | 172.16.16.99, 8.8.8.8 |

## Install Paket yang di butuhkan
```sh
pkg ins bind918
```
## Lakukan Konfigurasi
```sh term
#/etc/rc.conf
hostname="lab-fbsd"
ifconfig_em0="inet 172.16.16.99 netmask 255.255.255.0"
defaultrouter="172.16.16.1"
sshd_enable=YES
sendmail_enable=NONE
clear_tmp_enable=YES
syslogd_flags="-ss"
dumpdev=NO
```
## Mengkonfigurasi Server DNS
Periksa dan Cadangkan konfigurasi default setelah server DHCP diinstal
```sh file
cat /usr/local/etc/namedb/named.conf
cp /usr/local/etc/namedb/named.conf /usr/local/etc/namedb/named.conf.old
```
1. Ubah pada baris listen-on dan forwarders 127.0.0.1
```sh file
// the proper IP address, or delete this option.
        listen-on       { 127.0.0.1; };
```
    menjadi 
```sh file
// the proper IP address, or delete this option.
        listen-on {
                172.16.16.99;
        };
```
```sh file
// benefit from its cache, thus reduce overall DNS traffic in the Internet.
/*
        forwarders {
                127.0.0.1;
        };
*/
```
    menjadi
```sh file
// benefit from its cache, thus reduce overall DNS traffic in the Internet.

        forwarders {
                172.16.16.99;
        };

```
2. Buat zone forward dan zone reverse dibawah localhost
```sh file
// RFCs 1912, 5735 and 6303 (and BCP 32 for localhost)
zone "localhost"        { type primary; file "/usr/local/etc/namedb/primary/localhost-forward.db"; 
zone "127.in-addr.arpa" { type primary; file "/usr/local/etc/namedb/primary/localhost-reverse.db";
```
menjadi
```sh file
zone "localhost"        { type primary; file "/usr/local/etc/namedb/primary/localhost-forward.db"; };
zone "lab-fbsd.edu"        { type primary; file "/usr/local/etc/namedb/primary/lab-fbsd-forward.db"; };
zone "127.in-addr.arpa" { type primary; file "/usr/local/etc/namedb/primary/localhost-reverse.db"; };
zone "172.in-addr.arpa" { type primary; file "/usr/local/etc/namedb/primary/lab-fbsd-reverse.db"; };
```
2. Buat file di /usr/local/etc/namedb/primary/ dengan lab-fbsd-forward.db dan lab-fbsd-reverse.db
```sh file 
#/usr/local/etc/namedb/primary/lab-fbsd-forward.db
$TTL 3h
lab-fbsd.edu. SOA lab-fbsd.edu. nobody.lab-fbsd.edu. 42 1d 12h 1w 3h
        ; Serial, Refresh, Retry, Expire, Neg. cache TTL

        NS      lab-fbsd.edu.

        A       172.16.16.99
        AAAA    ::1
```
dan
```sh file
#/usr/local/etc/namedb/primary/lab-fbsd-reverse.db
$TTL 3h
@ SOA lab-fbsd.edu. nobody.lab-fbsd.edu. 42 1d 12h 1w 3h
        ; Serial, Refresh, Retry, Expire, Neg. cache TTL

        NS      lab-fbsd.edu.

99.16.16   PTR     lab-fbsd.edu.

1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0 PTR lab-fbsd.edu.
```
3. edit file hosts dan resolv
```sh file
#/etc/hosts
::1                     localhost localhost.local
127.0.0.1               localhost localhost.local
::1                     lab-fbsd.edu lab-fbsd
172.16.16.99            lab-fbsd.edu lab-fbsd
```
```sh file
#/etc/resolv.conf
# Generated by resolvconf
search lab-fbsd.edu
nameserver 172.16.16.99
nameserver 10.10.10.2
nameserver 8.8.8.8
```
Aktifkan & jalankan layanan DNS server
``` sh file
sysrc named_enable="YES" #aktifkan
service named start
service named status
```


